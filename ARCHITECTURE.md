# ğŸ“Š Architecture Overview

Visual representation of the complete microservices architecture.

## ğŸ¯ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                          ğŸŒ USERS / BROWSERS                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTPS/HTTP
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                     ğŸ¨ Frontend (Next.js - React)                           â”‚
â”‚                        http://localhost:3001                                â”‚
â”‚                                                                             â”‚
â”‚  Features:                                                                  â”‚
â”‚  â€¢ User authentication UI                                                   â”‚
â”‚  â€¢ Document upload/management                                               â”‚
â”‚  â€¢ Affiliation checking                                                     â”‚
â”‚  â€¢ Responsive design (Tailwind CSS)                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                   â”‚
         â”‚ REST API         â”‚ REST API          â”‚ REST API
         â”‚                  â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚ â”‚                  â”‚ â”‚                         â”‚
â”‚  ğŸ” Auth Service  â”‚ â”‚ ğŸ“„ Documents     â”‚ â”‚ ğŸ¥ Affiliation          â”‚
â”‚      (Go)         â”‚ â”‚   Service (Go)   â”‚ â”‚   Service (Django)      â”‚
â”‚  localhost:8080   â”‚ â”‚  localhost:8081  â”‚ â”‚   localhost:8000        â”‚
â”‚                   â”‚ â”‚                  â”‚ â”‚                         â”‚
â”‚  Endpoints:       â”‚ â”‚  Endpoints:      â”‚ â”‚  Endpoints:             â”‚
â”‚  â€¢ /register      â”‚ â”‚  â€¢ /documents    â”‚ â”‚  â€¢ /affiliation/check   â”‚
â”‚  â€¢ /login         â”‚ â”‚  â€¢ /upload       â”‚ â”‚  â€¢ /documents/auth      â”‚
â”‚  â€¢ /refresh       â”‚ â”‚  â€¢ /download     â”‚ â”‚  â€¢ /health              â”‚
â”‚  â€¢ /logout        â”‚ â”‚  â€¢ /delete       â”‚ â”‚                         â”‚
â”‚  â€¢ /me            â”‚ â”‚                  â”‚ â”‚                         â”‚
â”‚                   â”‚ â”‚                  â”‚ â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                      â”‚                     â”‚
      â”‚                      â”‚                     â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚  â”‚                   â”‚
      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚  â”‚                              â”‚
      â”‚  â”‚  â”‚   ğŸ“¨ RabbitMQ Message Broker â”‚
      â”‚  â”‚  â”‚      localhost:5672          â”‚
      â”‚  â”‚  â”‚   Management: :15672         â”‚
      â”‚  â”‚  â”‚                              â”‚
      â”‚  â”‚  â”‚  Queues:                     â”‚
      â”‚  â”‚  â”‚  â€¢ user.transferred          â”‚
      â”‚  â”‚  â”‚  â€¢ document.auth.requested   â”‚
      â”‚  â”‚  â”‚  â€¢ document.auth.completed   â”‚
      â”‚  â”‚  â”‚  â€¢ affiliation.checked       â”‚
      â”‚  â”‚  â”‚                              â”‚
      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚  â”‚
      â”‚  â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚ â”‚                  â”‚ â”‚                     â”‚
â”‚  ğŸ’¾ PostgreSQL    â”‚ â”‚ ğŸ’¾ DynamoDB      â”‚ â”‚ ğŸ’¾ MariaDB          â”‚
â”‚   localhost:5432  â”‚ â”‚  localhost:8000  â”‚ â”‚  localhost:3306     â”‚
â”‚                   â”‚ â”‚                  â”‚ â”‚                     â”‚
â”‚  Data:            â”‚ â”‚  Data:           â”‚ â”‚  Data:              â”‚
â”‚  â€¢ Users          â”‚ â”‚  â€¢ Document      â”‚ â”‚  â€¢ Affiliations     â”‚
â”‚  â€¢ Credentials    â”‚ â”‚    Metadata      â”‚ â”‚  â€¢ Citizens         â”‚
â”‚  â€¢ Profiles       â”‚ â”‚  â€¢ Ownership     â”‚ â”‚  â€¢ Documents        â”‚
â”‚                   â”‚ â”‚                  â”‚ â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚        â”‚        â”‚                         â”‚
â”‚  ğŸ—„ï¸ Redis Cache    â”‚        â”‚        â”‚  ğŸ—„ï¸ Redis Cache         â”‚
â”‚   localhost:6379   â”‚        â”‚        â”‚   localhost:6380        â”‚
â”‚                    â”‚        â”‚        â”‚                         â”‚
â”‚  Data:             â”‚        â”‚        â”‚  Data:                  â”‚
â”‚  â€¢ JWT Tokens      â”‚        â”‚        â”‚  â€¢ Session Cache        â”‚
â”‚  â€¢ Blacklist       â”‚        â”‚        â”‚  â€¢ Rate Limiting        â”‚
â”‚  â€¢ Session Data    â”‚        â”‚        â”‚                         â”‚
â”‚                    â”‚        â”‚        â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚               â”‚
                      â”‚  ğŸ“¦ MinIO     â”‚
                      â”‚  (S3 Storage) â”‚
                      â”‚  :9000 :9001  â”‚
                      â”‚               â”‚
                      â”‚  Data:        â”‚
                      â”‚  â€¢ Documents  â”‚
                      â”‚  â€¢ Files      â”‚
                      â”‚  â€¢ Attachmentsâ”‚
                      â”‚               â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                          ğŸ“Š MONITORING & OBSERVABILITY                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Prometheus     â”‚â—„â”€â”€â”€â”‚    Services      â”‚    â”‚     Grafana      â”‚    â”‚
â”‚  â”‚  localhost:9090  â”‚    â”‚   (Metrics)      â”‚â”€â”€â”€â–ºâ”‚  localhost:3000  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagrams

### User Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User   â”‚â”€â”€â”€â”€1â”€â”€â”€â–ºâ”‚ Frontend â”‚â”€â”€â”€â”€2â”€â”€â”€â–ºâ”‚ Auth       â”‚â”€â”€â”€â”€3â”€â”€â”€â–ºâ”‚ Postgresâ”‚
â”‚        â”‚         â”‚          â”‚         â”‚ Service    â”‚         â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–²                      â”‚
                        â”‚                      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€4â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          (JWT Tokens)

1. User submits registration form
2. Frontend sends POST /api/v1/auth/register
3. Auth service creates user in PostgreSQL
4. Returns JWT access & refresh tokens
```

### Document Upload Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User   â”‚â”€â”€â”€â”€1â”€â”€â”€â–ºâ”‚ Frontend â”‚â”€â”€â”€â”€2â”€â”€â”€â–ºâ”‚ Documents  â”‚â”€â”€â”€â”€3â”€â”€â”€â–ºâ”‚ MinIO  â”‚
â”‚        â”‚         â”‚          â”‚         â”‚ Service    â”‚         â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”‚4
                                              â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ DynamoDB   â”‚
                                        â”‚            â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User uploads document via UI
2. Frontend sends file to Documents service
3. Service stores file in MinIO (S3)
4. Service saves metadata in DynamoDB
```

### Affiliation Check Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User   â”‚â”€â”€â”€â–ºâ”‚ Frontend â”‚â”€â”€â”€â–ºâ”‚Affiliationâ”‚â”€â”€â”€â–ºâ”‚External â”‚â”€â”€â”€â–ºâ”‚ MariaDB  â”‚
â”‚        â”‚    â”‚          â”‚    â”‚ Service   â”‚    â”‚  API    â”‚    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚
                                    â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ RabbitMQ â”‚
                              â”‚ (Event)  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User requests affiliation check
2. Frontend calls Affiliation service
3. Service queries external government API
4. Saves result in MariaDB
5. Publishes event to RabbitMQ
```

### Document Authentication Flow (Event-Driven)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Documents   â”‚â”€â”€â”€â”€1â”€â”€â”€â–ºâ”‚   RabbitMQ   â”‚â”€â”€â”€â”€2â”€â”€â”€â–ºâ”‚ Affiliation  â”‚
â”‚  Service     â”‚         â”‚              â”‚         â”‚  Service     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                                                  â”‚
       â”‚                                                  â”‚3
       â”‚                                                  â–¼
       â”‚                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                            â”‚ External â”‚
       â”‚                                            â”‚   API    â”‚
       â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                                  â”‚
       â”‚                                                  â”‚4
       â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€6â”€â”€â”€â”€â”€â”€â”€â”¤   RabbitMQ   â”‚â—„â”€â”€â”€â”€â”€â”€â”€5â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚              â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Documents service publishes auth request
2. Affiliation service consumes message
3. Checks document with external API
4. Processes authentication result
5. Publishes completion event
6. Documents service receives result
```

## ğŸ—ï¸ Technology Stack by Layer

### Presentation Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Frontend (Next.js)              â”‚
â”‚                                         â”‚
â”‚  â€¢ Next.js 16 (React 19)                â”‚
â”‚  â€¢ TypeScript                           â”‚
â”‚  â€¢ Tailwind CSS                         â”‚
â”‚  â€¢ JWT Token Management                 â”‚
â”‚  â€¢ API Client (fetch/axios)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Application Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Service    â”‚  â”‚ Documents Serviceâ”‚  â”‚Affiliation Svc   â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚  â€¢ Go 1.25       â”‚  â”‚  â€¢ Go 1.25       â”‚  â”‚  â€¢ Python 3.12   â”‚
â”‚  â€¢ Gorilla Mux   â”‚  â”‚  â€¢ Gin Framework â”‚  â”‚  â€¢ Django 5.0    â”‚
â”‚  â€¢ JWT Library   â”‚  â”‚  â€¢ AWS SDK       â”‚  â”‚  â€¢ DRF 3.15      â”‚
â”‚  â€¢ Bcrypt        â”‚  â”‚  â€¢ UUID          â”‚  â”‚  â€¢ Pika (AMQP)   â”‚
â”‚  â€¢ Zap Logger    â”‚  â”‚  â€¢ Prometheus    â”‚  â”‚  â€¢ Celery        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL   â”‚  â”‚  DynamoDB    â”‚  â”‚   MariaDB    â”‚  â”‚    MinIO     â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ â€¢ User Data  â”‚  â”‚ â€¢ Documents  â”‚  â”‚ â€¢ Citizens   â”‚  â”‚ â€¢ Files      â”‚
â”‚ â€¢ Auth Data  â”‚  â”‚ â€¢ Metadata   â”‚  â”‚ â€¢ Checks     â”‚  â”‚ â€¢ Objects    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redis (Auth) â”‚  â”‚Redis (Affil) â”‚
â”‚              â”‚  â”‚              â”‚
â”‚ â€¢ JWT Cache  â”‚  â”‚ â€¢ Sessions   â”‚
â”‚ â€¢ Blacklist  â”‚  â”‚ â€¢ Cache      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Messaging Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            RabbitMQ 3                   â”‚
â”‚                                         â”‚
â”‚  Exchanges:                             â”‚
â”‚  â€¢ user.events                          â”‚
â”‚  â€¢ document.events                      â”‚
â”‚  â€¢ affiliation.events                   â”‚
â”‚                                         â”‚
â”‚  Queues:                                â”‚
â”‚  â€¢ user.transferred                     â”‚
â”‚  â€¢ document.authentication.requested    â”‚
â”‚  â€¢ document.authentication.completed    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Monitoring Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Prometheus     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚     Grafana      â”‚
â”‚                  â”‚         â”‚                  â”‚
â”‚  â€¢ Metrics       â”‚         â”‚  â€¢ Dashboards    â”‚
â”‚  â€¢ Alerts        â”‚         â”‚  â€¢ Visualization â”‚
â”‚  â€¢ Time Series   â”‚         â”‚  â€¢ Alerts        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Container Architecture

```
Docker Compose Networks:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               auth-network                                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Auth    â”‚  â”‚PostgreSQLâ”‚  â”‚ Redis  â”‚  â”‚ Prometheus  â”‚ â”‚
â”‚  â”‚  Service  â”‚  â”‚          â”‚  â”‚        â”‚  â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               app-network                                   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Documents â”‚ â”‚DynamoDB â”‚ â”‚ MinIO  â”‚ â”‚RabbitMQâ”‚ â”‚ Admin â”‚ â”‚
â”‚  â”‚ Service  â”‚ â”‚         â”‚ â”‚        â”‚ â”‚        â”‚ â”‚ Shell â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          affiliation-network                                â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Django â”‚ â”‚MariaDB â”‚ â”‚ Redis  â”‚ â”‚RabbitMQâ”‚ â”‚Consumer â”‚  â”‚
â”‚  â”‚  Web   â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚Prometheusâ”‚  â”‚ Grafana â”‚                                 â”‚
â”‚  â”‚          â”‚  â”‚         â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Transport Security
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ HTTPS/TLS in production               â”‚
   â”‚  â€¢ Certificate management                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Authentication & Authorization
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ JWT Tokens (Access + Refresh)         â”‚
   â”‚  â€¢ Token expiration (15 min access)      â”‚
   â”‚  â€¢ Token blacklist (Redis)               â”‚
   â”‚  â€¢ Password hashing (bcrypt)             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. API Security
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ CORS configuration                    â”‚
   â”‚  â€¢ Rate limiting                         â”‚
   â”‚  â€¢ Input validation                      â”‚
   â”‚  â€¢ SQL injection prevention              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Data Security
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ Database encryption at rest           â”‚
   â”‚  â€¢ Encrypted environment variables       â”‚
   â”‚  â€¢ Secure secrets management             â”‚
   â”‚  â€¢ Access control lists                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. Network Security
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â€¢ Docker network isolation              â”‚
   â”‚  â€¢ Service-to-service authentication     â”‚
   â”‚  â€¢ Firewall rules                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ Scalability Design

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Load Balancer â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                â”‚                â”‚
       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
       â”‚ Auth    â”‚      â”‚ Auth    â”‚     â”‚ Auth    â”‚
       â”‚ Pod 1   â”‚      â”‚ Pod 2   â”‚     â”‚ Pod N   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Horizontal Scaling:
  â€¢ Kubernetes Horizontal Pod Autoscaler (HPA)
  â€¢ Scale based on CPU/Memory/Custom metrics
  â€¢ Stateless service design

Database Scaling:
  â€¢ Read replicas for PostgreSQL/MariaDB
  â€¢ Redis clustering
  â€¢ DynamoDB auto-scaling

Caching Strategy:
  â€¢ Redis for session data
  â€¢ CDN for static assets
  â€¢ Application-level caching
```

---

**For more details, see:**
- [README.md](./README.md) - Main project documentation
- [LOCAL_SETUP_GUIDE.md](./LOCAL_SETUP_GUIDE.md) - Setup instructions
- [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) - Command reference
- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) - Problem solving
